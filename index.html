<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸‹ä¸€ç«™å»å“ªï¼ŸTravel Randomizer 3D</title>
    <script src="//unpkg.com/globe.gl"></script>
    <style>
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            /* èƒŒæ™¯æ”¹ä¸ºæ·±è‰²ï¼Œè®©åœ°çƒä»ªæ›´å¥½çœ‹ */
            background: radial-gradient(circle at center, #1a2a6c, #b21f1f, #fdbb2d);
            margin: 0;
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            overflow-x: hidden; /* é˜²æ­¢æ»šåŠ¨æ¡å‡ºç° */
        }
        /* å­˜æ”¾åœ°çƒä»ªçš„å®¹å™¨ */
        #globeViz {
            width: 100%;
            height: 50vh; /* å æ®å±å¹•ä¸€åŠé«˜åº¦ */
            cursor: move; /* é¼ æ ‡æ”¾ä¸Šå»å˜æˆæŠ“æ‰‹ */
        }
        .container {
            background: rgba(255, 255, 255, 0.9); /* åŠé€æ˜èƒŒæ™¯ */
            padding: 30px;
            border-radius: 20px 20px 0 0;
            box-shadow: 0 -10px 25px rgba(0,0,0,0.2);
            text-align: center;
            max-width: 500px;
            width: 90%;
            position: relative;
            top: -20px; /* ç¨å¾®å¾€ä¸Šæä¸€ç‚¹ï¼Œç›–ä½åœ°çƒä»ªåº•éƒ¨ */
            flex-grow: 1;
        }
        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.8em;
        }
        .result-box {
            margin: 20px 0;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .city-name {
            font-size: 2.2em;
            font-weight: bold;
            color: #e74c3c;
            margin: 0;
        }
        .country-name {
            font-size: 1.1em;
            color: #7f8c8d;
            margin-top: 5px;
        }
        .desc {
            margin-top: 15px;
            font-size: 0.9em;
            color: #555;
            line-height: 1.5;
        }
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 1.1em;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }
        button:hover {
            background-color: #2980b9;
            transform: scale(1.05);
        }
    </style>
</head>
<body>

<div id="globeViz"></div>

<div class="container">
    <h1>ğŸŒ ä¸‹ä¸€ç«™ï¼Œè½¬åˆ°å“ªï¼Ÿ</h1>
    <p>ç‚¹å‡»æŒ‰é’®ï¼Œåœ°çƒä»ªå¸¦ä½ é£å‘ä¸‹ä¸€ä¸ªå®‰å…¨ç›®çš„åœ°ï¼</p>
    
    <div class="result-box" id="resultArea">
        <p style="color: #aaa;">å‡†å¤‡å¥½èµ·é£äº†å—ï¼Ÿ</p>
    </div>

    <button onclick="flyToRandomCity()">èµ·é£ï¼å‘Šè¯‰æˆ‘ç­”æ¡ˆ</button>
</div>

<script>
    // --- æ•°æ®æº (æ³¨æ„ï¼šå¿…é¡»åŒ…å« lat å’Œ lng åæ ‡) ---
    // è¿™é‡Œæˆ‘å…ˆåˆ—ä¸¾äº†6ä¸ªåˆ†å¸ƒåœ¨ä¸åŒå¤§æ´²çš„åŸå¸‚ä½œä¸ºæ¼”ç¤ºã€‚
    // ä½ ä»¥åæ·»åŠ æ•°æ®æ—¶ï¼Œéœ€è¦å»è°·æ­Œåœ°å›¾æŸ¥ä¸€ä¸‹å®ƒä»¬çš„åæ ‡ã€‚
    const destinations = [
        { city: "äº¬éƒ½", country: "æ—¥æœ¬", lat: 35.0116, lng: 135.7681, desc: "å¤éŸµç¦…æ„ï¼Œå››å­£åˆ†æ˜ï¼Œæ²»å®‰æä½³çš„å¤éƒ½ã€‚" },
        { city: "é›·å…‹é›…æœªå…‹", country: "å†°å²›", lat: 64.1466, lng: -21.9426, desc: "ä¸–ç•Œå°½å¤´çš„å†·é…·ä»™å¢ƒï¼Œæå…¶å®‰å…¨ï¼Œé€‚åˆçœ‹æå…‰ã€‚" },
        { city: "æ–°åŠ å¡", country: "æ–°åŠ å¡", lat: 1.3521, lng: 103.8198, desc: "èŠ±å›­åŸå¸‚ï¼Œå…¨çƒæ²»å®‰å…¸èŒƒï¼Œç¾é£Ÿèšé›†åœ°ã€‚" },
        { city: "æ‚‰å°¼", country: "æ¾³å¤§åˆ©äºš", lat: -33.8688, lng: 151.2093, desc: "æ­Œå‰§é™¢ä¸æµ·æ¸¯å¤§æ¡¥ï¼Œå……æ»¡æ´»åŠ›çš„å›½é™…å¤§éƒ½å¸‚ã€‚" },
        { city: "æ¸©å“¥å", country: "åŠ æ‹¿å¤§", lat: 49.2827, lng: -123.1207, desc: "èƒŒå±±é¢æµ·ï¼Œæ°”å€™å®œäººï¼Œè‡ªç„¶ä¸åŸå¸‚å®Œç¾èåˆã€‚" },
        { city: "å¼€æ™®æ•¦", country: "å—é", lat: -33.9249, lng: 18.4241, desc: "æ¡Œå±±è„šä¸‹çš„ç»ç¾æµ·æ»¨åŸå¸‚ï¼ˆéœ€æ³¨æ„ç‰¹å®šåŒºåŸŸå®‰å…¨ï¼‰ã€‚" }
    ];

    // --- 3D åœ°çƒä»ªåˆå§‹åŒ– ---
    const world = Globe()
      (document.getElementById('globeViz'))
      // ä½¿ç”¨ä¸€å¼ æ¼‚äº®çš„åœ°çƒå«æ˜Ÿè´´å›¾
      .globeImageUrl('//unpkg.com/three-globe/example/img/earth-blue-marble.jpg')
      // ç¨å¾®æŠŠåœ°çƒè°ƒäº®ä¸€ç‚¹
      .pointColor(() => 'red') // æ ‡è®°ç‚¹çš„é¢œè‰²
      .pointAltitude(0.1)     // æ ‡è®°ç‚¹çš„é«˜åº¦ï¼ˆç¨å¾®æµ®èµ·æ¥ä¸€ç‚¹ï¼‰
      .pointRadius(0.5);      // æ ‡è®°ç‚¹çš„å¤§å°

    // è®¾ç½®åˆå§‹è§†è§’ï¼ˆç¨å¾®ç¦»è¿œä¸€ç‚¹çœ‹ï¼‰
    world.pointOfView({ altitude: 2.5 });

    // è‡ªåŠ¨æ—‹è½¬ï¼ˆä¸ºäº†å¥½çœ‹ï¼Œå¯é€‰ï¼‰
    world.controls().autoRotate = true;
    world.controls().autoRotateSpeed = 0.5;

    // --- æ ¸å¿ƒåŠŸèƒ½ï¼šç‚¹å‡»æŒ‰é’®é£å‘éšæœºåŸå¸‚ ---
    function flyToRandomCity() {
        const resultArea = document.getElementById('resultArea');
        resultArea.innerHTML = '<p>æ­£åœ¨è®¡ç®—èˆªçº¿ï¼Œå‡†å¤‡èµ·é£...</p>';
        
        // 1. åœæ­¢è‡ªåŠ¨æ—‹è½¬ï¼Œå‡†å¤‡é£è¶Š
        world.controls().autoRotate = false;

        setTimeout(() => {
            // 2. éšæœºæŠ½å–ä¸€ä¸ªåŸå¸‚
            const randomIndex = Math.floor(Math.random() * destinations.length);
            const selected = destinations[randomIndex];

            // 3. åœ°çƒä»ªåŠ¨ä½œï¼šé£å‘ç›®æ ‡!
            // pointOfView({ lat, lng, altitude }, duration_ms)
            world.pointOfView(
                { lat: selected.lat, lng: selected.lng, altitude: 1.5 }, // ç›®æ ‡åæ ‡å’Œé£è¡Œé«˜åº¦
                2500 // é£è¡Œæ—¶é—´ï¼š2.5ç§’
            );

            // 4. åœ°çƒä»ªåŠ¨ä½œï¼šåœ¨ç›®æ ‡ä½ç½®æ’ä¸Šä¸€ä¸ªçº¢ç‚¹æ ‡è®°
            world.pointsData([{lat: selected.lat, lng: selected.lng}]);

            // 5. æ›´æ–°ä¸‹æ–¹çš„æ–‡å­—ä¿¡æ¯
            resultArea.innerHTML = `
                <div class="city-name">${selected.city}</div>
                <div class="country-name">${selected.country}</div>
                <div class="desc">${selected.desc}</div>
            `;
        }, 500);
    }

    // ä¸ºäº†é€‚åº”çª—å£å¤§å°å˜åŒ–
    window.addEventListener('resize', () => {
        world.width(window.innerWidth);
        world.height(window.innerHeight / 2);
    });
</script>

</body>
</html>
